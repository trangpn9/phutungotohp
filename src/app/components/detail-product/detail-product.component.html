<header>

    <app-header></app-header>

    <app-breadcrumb></app-breadcrumb>

    <div class="container">
        <app-search></app-search>
    </div>

</header>

<main role="main" *ngIf="data; else loading;">
    <!--Title categroy-->
    <div class="container search-by-cate">
        <h1 class="tit-category">
            <fa-icon [icon]="faCar"></fa-icon> {{data['title']}}
        </h1>        
    </div>
    <!--End Title categroy-->

    <div class="container content-detail-product">
        <div class="row">
            <div class="col-md-5">
                <div class="img-product">
                    <img [src]="imgPreview" [alt]="data['title']" class="img-fluid" />
                    <div class="container" *ngIf="data['attechment'].length > 0">
                        <div class="row justify-content-center">
                            <div class="col-3">
                                <img 
                                    [src]="data['img'][0]" 
                                    alt="product gallery"
                                    class="img-fluid img-gallery"
                                    (click)="changeImgPreview(data['img'][0])"
                                 />
                            </div>
                            <div class="col-3" *ngFor="let itemGallerry of data['attechment'] ">
                                <img 
                                    [src]="itemGallerry" 
                                    alt="product gallery"
                                    class="img-fluid img-gallery" 
                                    (click)="changeImgPreview(itemGallerry)"
                                />
                            </div>                            
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 tit-content-dt-product text-center">
                            <h4 class="tit-dt-product">{{data['title']}}</h4>
                            <!-- <h4 class="ma-dt-product">8158CD592201</h4> -->
                        </div>
                        <div class="col-6 price-dt-prduct text-right">Giá: Liên Hệ</div>
                        <div class="col-6 add-to-cart text-left">
                            <button
                                class="btn site-button"
                                data-toggle="modal"
                                data-target="#myModal"
                                (click)="addToCart(dangerTpl)"
                            >
                                Đặt mua
                            </button>
                        </div>
                    </div>
                    <div class="des-add-to-cart">
                        <ul>
                            <li>Vận chuyển miễn phí ra các đơn hàng > 3,000,000 đ</li>
                            <li>Giá trên chưa bao gồm VAT</li>
                            <li>Cam kết sản phẩm 100% chính hãng</li>
                        </ul>
                        <h5>Điện thoại bán hàng</h5>
                        <a href="tel:+84977454568" title="Online 27/4">
                            <img src="./assets/img/hotline_banhang.png" alt="Điện thoại bán hàng online"
                                class="img-fluid" />
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-md-7 main-ds-content-product">
                <!-- <h2 class="tit-category tit-product"><fa-icon [icon]="faCar"></fa-icon> {{data['title']}}</h2> -->
                <div 
                    [innerHTML]="data['content'] | renderHtml"
                    class="mb-4"
                ></div>
                <div class="row">
                    <div class="col-md-7 col-12">
                        <table class="table table-hover">
                            <tbody>
                                <tr>
                                    <td>Mã sản phẩm</td>
                                    <th>{{data['pa_ma-san-pham'][0]['name']}}</th>
                                </tr>
                                <tr>
                                    <td>Tên sảm phẩm</td>
                                    <td>
                                        <h3>{{data['pa_ten-san-pham'][0]['name']}}</h3>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Thương hiệu</td>
                                    <td>{{data['pa_thuong-hieu'][0]['name']}}</td>
                                </tr>
                                <tr>
                                    <td>Xuất xứ</td>
                                    <th>{{data['pa_xuat-xu'][0]['name']}}</th>
                                </tr>
                                <tr>
                                    <td>Dùng cho xe</td>
                                    <th>{{data['pa_dung-cho-xe'][0]['name']}}</th>
                                </tr>                                
                            </tbody>
                        </table>
                        <img src="./assets/img/btn-facebook.png" alt="Like Facebook" class="img-fluid" />
                    </div>
                    <div class="col-md-5 col-12 text-center">
                        <h5>Điện thoại bán hàng</h5>
                        <a href="tel:+84977454568" title="Online 27/4">
                            <img src="./assets/img/hotline_banhang.png" alt="Điện thoại bán hàng online"
                                class="img-fluid" />
                        </a>
                    </div>
                </div>
                <div class="row comment-facebook">
                    <img src="./assets/img/comment-facebook.png" class="img-fluid" alt="Comment Facebook" />
                </div>
                <!-- <div class="row car-use">
                    <div class="col-12">
                        <h3 class="tit-category tit-product"><fa-icon [icon]="faCar"></fa-icon> Đèn pha trái Peugeot 3008 - 2017
                            -
                            8158CD592201</h3>
                        <table class="table table-hover">
                            <tr class="bg-primary">
                                <th>Ảnh minh họa</th>
                                <th>Xe sử dụng</th>
                                <th>Năm sản xuất</th>
                                <th>Xuất xứ</th>
                            </tr>
                            <tr>
                                <td style="max-width:140px;"><img src="./assets/img/pic1a.jpg" class="img-fluid"
                                        alt="Car user" /></td>
                                <td><a href="#">Peugeot 5008</a></td>
                                <td>2017 - 2018</td>
                                <td>
                                    <h6>Chính hãng</h6>
                                </td>
                            </tr>
                            <tr>
                                <td style="max-width:140px;"><img src="./assets/img/pic2a.jpg" class="img-fluid"
                                        alt="Car user" /></td>
                                <td><a href="#">Peugeot 5008</a>, <a href="#">Peugeot 3008</a></td>
                                <td>2015 - 2017</td>
                                <td>
                                    <h6>Chính hãng</h6>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div> -->
            </div>
        </div>
    </div> 

    <!-- San pham cung loai -->
    <div class="container list-products mt-4">
        <h3 class="tit-category tit-product" *ngIf="relateProducts.length > 0"><fa-icon [icon]="faCar"></fa-icon> Sản phẩm cùng loại</h3>
        <div class="row" *ngIf="relateProducts.length > 0">
            <div class="col-md-3 col-6 text-center cate1 zoom" *ngFor="let product of relateProducts">
                <a class="wrap-img-viewed" [routerLink]="['/san-pham/detail', product.id, product.slug]">
                    <img 
                        [src]="product.img === false ? './../../../assets/img/default-img-phutungsuzuki.jpg' : product.img[0]"
                        [alt]="product.title"
                        class="img-fluid"
                    />
                </a>
                <div class="info-product">
                    <p class="line-img-product"></p>
                    <a class="titleSP-product" [routerLink]="['/san-pham/detail', product.id, product.slug]">
                        {{product.title | truncateTitle:12}}
                    </a>
                </div>
                <p class="price">Giá: Liên hệ</p>
            </div>            
        </div>

        <!-- San pham da xem -->
        <h3 class="tit-category tit-product" *ngIf="viewedProducts.length > 0"><fa-icon [icon]="faCar"></fa-icon> Sản phẩm đã xem</h3>
        <div class="row" *ngIf="viewedProducts.length > 0">
            <div class="col-md-3 col-6 text-center cate1 zoom" *ngFor="let product of viewedProducts">
                <a class="wrap-img-viewed" [routerLink]="['/san-pham/detail', product.id, product.slug]">
                    <img [src]="product.img === false ? './../../../assets/img/default-img-phutungsuzuki.jpg' : product.img[0]" [alt]="product.title" class="img-fluid">
                </a>
                <div class="info-product">
                    <p class="line-img-product"></p>
                    <a class="titleSP-product" [routerLink]="['/san-pham/detail', product.id, product.slug]">{{product.title | truncateTitle}}</a>
                </div>
                <p class="price">Giá: Liên hệ</p>
            </div>            
        </div>
    </div>

    <!-- Huong Dan mua hang -->
    <div 
        class="container"
        *ngIf="acf" 
        [acf]="acf"
        app-payment
    ></div>
</main>

<ng-template #dangerTpl>
    <svg xmlns="http://www.w3.org/2000/svg" fill="#fff" width="24" height="24" viewBox="0 0 24 24"><path d="M10.872 6.831l1.695 3.904 3.654-1.561-1.79 3.426 3.333.954-3.417 1.338 2.231 4.196-4.773-2.582-2.869 2.287.413-3.004-3.792-.726 2.93-1.74-1.885-2.512 3.427.646.843-4.626zm-.786-6.831l-1.665 9.119-6.512-1.228 3.639 4.851-5.548 3.294 7.108 1.361-.834 6.076 5.742-4.577 9.438 5.104-4.288-8.064 6.834-2.677-6.661-1.907 3.25-6.22-6.98 2.982-3.523-8.114z"/></svg>
    Thêm SP: {{data['title']}}
</ng-template>

<!-- <app-toasts aria-live="polite" aria-atomic="true"></app-toasts> -->

<ng-template #loading>
    <app-pre-loading></app-pre-loading>
</ng-template>